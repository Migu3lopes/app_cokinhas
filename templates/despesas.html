{% extends 'base.html' %}
{% block title %}Gest√£o de Despesas{% endblock %}

{% block content %}
<style>
    #logo-clube {
        display: block;
        margin: 20px auto;
        max-width: 120px;
        height: auto;
    }

    body {
        background-color: #f4f4f4;
        padding: 20px;
    }

    h1, h2 {
        text-align: center;
    }

    form {
        margin: 20px auto;
        max-width: 600px;
        background-color: white;
        padding: 20px;
        border-radius: 6px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    label {
        display: block;
        margin: 10px 0 5px;
    }

    select, input[type="text"], input[type="date"], textarea, button {
        width: 100%;
        padding: 8px;
        margin-bottom: 15px;
        border-radius: 4px;
        border: 1px solid #ccc;
        font-size: 14px;
    }

    button {
        background-color: #1E90FF;
        color: white;
        font-weight: bold;
        cursor: pointer;
    }

    button:hover {
        background-color: #0066cc;
    }

    .voltar, .ver-tabela {
        display: inline-block;
        margin: 15px 10px 0;
        padding: 12px 25px;
        background-color: #888;
        color: white;
        text-decoration: none;
        border-radius: 6px;
        font-weight: bold;
    }

    .voltar:hover, .ver-tabela:hover {
        background-color: #666;
    }
</style>

<script>
    function formatarParaEuro(input) {
        let valor = parseFloat(input.value.replace(",", "."));
        if (!isNaN(valor)) {
            input.value = "‚Ç¨" + valor.toFixed(2);
        }
    }

    function validarFormulario(event) {
        const campo = document.querySelector('input[name="valor"]');
        let valor = campo.value.replace("‚Ç¨", "").replace(",", ".");
        if (isNaN(parseFloat(valor))) {
            alert("Por favor, insira um valor num√©rico v√°lido.");
            event.preventDefault();
        }
    }

    window.addEventListener("DOMContentLoaded", () => {
        document.querySelector("form").addEventListener("submit", validarFormulario);
    });
</script>

<div class="container">
    <img src="{{ url_for('static', filename='img/assiduidade.png') }}" alt="Logo do Clube" id="logo-clube">
    <h1>Gest√£o de Despesas</h1>

    <form action="/despesas/guardar" method="POST">
        <label for="item">Item:</label>
        <select name="item" required>
            {% for item in ['Aquisi√ß√£o de material desportivo', 'Equipamentos', 'Aquisi√ß√£o de bens alimentares', 'Pagamento de Torneios', 'Pagamentos Treinadores', 'Exames m√©dicos', 'Pagamento de Seguros', 'Pagamento de combust√≠vel', 'Outros pagamentos'] %}
            <option value="{{ item }}">{{ item }}</option>
            {% endfor %}
        </select>

        <label for="data">Data:</label>
        <input type="date" name="data" required>

        <label for="valor">Valor:</label>
        <input type="text" name="valor" placeholder="0.00" onblur="formatarParaEuro(this)" required>

        <label for="comentario">Coment√°rio:</label>
        <textarea name="comentario" placeholder="Coment√°rio..." rows="3"></textarea>

        <button type="submit">Guardar Despesa</button>
    </form>

    <a class="voltar" href="/administracao/financeiro">üîô Voltar √† Gest√£o de Movimentos Financeiros</a>
    <a class="ver-tabela" href="/tabela_despesas">üìã Ver Tabela de Despesas</a>
</div>
{% endblock %}
